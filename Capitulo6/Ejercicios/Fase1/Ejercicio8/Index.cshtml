@page
@model Ejercicio7Model

<h1>Lista de alumnos</h1>

<ul>
@foreach (Alumno alumno in Model.Alumnos)
{
    <li>
        @alumno.Nombre

        <!-- Eliminar -->
        <form method="post" asp-page-handler="Borrar" style="display:inline;">
            <input type="hidden" name="id" value="@alumno.Id" />
            <button type="submit">Eliminar</button>
        </form>

        <!-- Ver detalles -->
        <form method="post" asp-page-handler="Detalles" style="display:inline;">
            <input type="hidden" name="id" value="@alumno.Id" />
            <button type="submit">Ver Detalles</button>
        </form>
    </li>
}
</ul>

@if (Model.AlumnoSeleccionado != null)
{
    <h2>Detalles del alumno</h2>
    <p><b>Id:</b> @Model.AlumnoSeleccionado.Id</p>
    <p><b>Nombre:</b> @Model.AlumnoSeleccionado.Nombre</p>
    <p><b>Apellidos:</b> @Model.AlumnoSeleccionado.Apellidos</p>
    <p><b>Email:</b> @Model.AlumnoSeleccionado.Email</p>
    <p><b>Edad:</b> @Model.AlumnoSeleccionado.Edad</p>
}

<h2>Registrar nuevo alumno</h2>
<form method="post">
    Nombre: <input type="text" name="nombre" required /> <br />
    Apellidos: <input type="text" name="apellidos" required /> <br />
    Email: <input type="email" name="email" required /> <br />
    Edad: <input type="number" name="edad" required /> <br />
    <button type="submit">Registrar</button>
</form>

@if (!string.IsNullOrEmpty(Model.Mensaje))
{
    <p id="mensaje">@Model.Mensaje</p>
}

@section Scripts {
    <script>
        const msg = document.getElementById("mensaje");
        if (msg) {
            setTimeout(() => { msg.style.display = "none"; }, 3000);
        }
    </script>
}
